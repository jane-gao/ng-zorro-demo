<div *ngIf="showList">
  <div class="mb page-title">
    <h3 class="fl">公告管理</h3>
    <button class="fr m btn-thc" nz-button [routerLink]="'../add'">
      <i class="anticon anticon-plus"></i><span>新增公告</span>
    </button>
  </div>

  <nz-table #nzTable
            [nzData]="announceList.voList"
            [nzLoading]="_loading"
            [nzFrontPagination]="false"
            [nzTotal]="announceList.totalRow"
            [nzPageIndex]="announceList.curPage"
            (nzPageIndexChange)="queryAnnounceList($event)"
            [nzPageSize]="announceList.pageSize">
    <thead nz-thead>
    <tr>
      <th nz-th class="text-center"><span>序号</span></th>
      <th nz-th class="text-center"><span>标题</span></th>
      <th nz-th class="text-center"><span>管理员</span></th>
      <th nz-th class="text-center"><span>状态</span></th>
      <th nz-th class="text-center"><span>是否置顶</span></th>
      <th nz-th class="text-center"><span>创建时间</span></th>
      <th nz-th class="text-center"><span>管理</span></th>
    </tr>
    </thead>
    <tbody nz-tbody>
    <ng-template ngFor let-data [ngForOf]="nzTable.data" let-i="index">
      <tr nz-tbody-tr>
        <td nz-td class="text-center">{{i+1}}</td>
        <td nz-td class="text-center">{{data.title}}</td>
        <td nz-td class="text-center">{{data.adminName}}</td>
        <td nz-td class="text-center">{{data.state}}</td>
        <td nz-td class="text-center">
          <nz-switch class="thc" [ngModel]="data.isTop === enumState.yes"
                     [ngModelOptions]="{standalone: true}"
                     (ngModelChange)="changeAnnounceTop($event,data.id)">
            <span checked>是</span>
            <span unchecked>否</span>
          </nz-switch>
        </td>
        <td nz-td class="text-center">{{data.createTime | date:'yyyy-MM-dd HH:mm:ss'}}</td>
        <td nz-td class="text-center">
          <button nz-button class="mt-5" title="修改" class="btn-blue" [routerLink]="routerLinks.announce.update"
                  [queryParams]="{id:data.id}">
            <i class="anticon anticon-edit"></i>
          </button>
          <nz-popconfirm [nzPlacement]="'top'" [nzTitle]="pageMsg.announce.delete"
                         (nzOnConfirm)="deleteAnnounce(data.id)">
            <button nz-popconfirm nz-button class="mt-5" title="删除" class="btn-danger">
              <i class="iconfont icon-shanchu"></i>
            </button>
          </nz-popconfirm>
          <button nz-button class="mt-5" title="查看" class="btn-green" [routerLink]="routerLinks.announce.detail"
                  [queryParams]="{id:data.id}">
            <i class="iconfont icon-chakan"></i>
          </button>
        </td>
      </tr>
    </ng-template>
    </tbody>
  </nz-table>
</div>
