<div class="page-title">
  <h3 class="inline-block mr-20">平台财务管理</h3>
  <!--<p class="inline-block pl-54 font16">账户余额：<strong class="color-red font18">{{534555 | number:'1.2-2'}}</strong></p>-->
</div>
<div nz-row nzGutter="16">
  <div nz-col nzSm="24" nzLg="8" class="gutter-row mb-20">
    <div class="data-box b bd-red">
      <div class="w25 fl br text-center color-red  bd-red">
        <i class="anticon anticon-pay-circle-o font36" style="line-height: 86px"></i>
      </div>
      <div class="w75 fl text-left pl-30 pt-5">
        <div class="font30 color-red ">{{balance | number:'1.2-2'}}</div>
        <div class="text-uppercase">平台账户余额</div>
      </div>
    </div>
  </div>
</div>
<!--搜索 start-->
<form nz-form class="bg-white mt-15 mb-15" (submit)="queryFinanceRecList(1)">
  <div class="search-group">
    <span class="search-title">交易码：</span>
    <div class="search-main">
      <input nz-input name="tc" [(ngModel)]="searchParams.tc" placeholder="交易码"/>
    </div>
  </div>
  <div class="search-group">
    <span class="search-title">会计科目：</span>
    <div class="search-main">
      <nz-select style="width: 200px;" [(ngModel)]="searchParams.subject" name="authState">
        <nz-option *ngFor="let option of subject" [nzLabel]="option.val" [nzValue]="option.key"></nz-option>
      </nz-select>
    </div>
  </div>
  <div class="search-group">
    <span class="search-title">交易对象：</span>
    <div class="search-main">
      <nz-select style="width: 200px;" [(ngModel)]="searchParams.userType" name="userType">
        <nz-option *ngFor="let option of userType" [nzLabel]="option.val" [nzValue]="option.key"></nz-option>
      </nz-select>
    </div>
  </div>
  <div class="inline-block">
    <button nz-button class="ml-20 mr" [nzType]="'primary'" title="搜索" type="submit">
      <i class="anticon anticon-search"></i><span>搜索</span>
    </button>
    <button nz-button class="mr" title="重置" type="reset" (click)="resetSearch()">
      <i class="anticon anticon-sync"></i><span>重置</span>
    </button>
  </div>
</form>
<!--搜索 end-->

<nz-table #nzTable
          [nzData]="page.voList"
          [nzLoading]="_loading"
          [nzFrontPagination]="false"
          [nzPageSize]="page.pageSize"
          [nzTotal]="page.totalRow"
          [nzPageIndex]="page.curPage"
          (nzPageIndexChange)="queryFinanceRecList($event)">
  <thead nz-thead>
  <tr>
    <th nz-th class="text-center" nzWidth="5%"><span>序号</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>交易码</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>金额</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>会计科目</span></th>
    <th nz-th class="text-center" nzWidth="15%"><span>交易对象</span></th>
    <th nz-th class="text-center" nzWidth="5%"><span>交易方式</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>付款方银行</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>付款方账户</span></th>
    <th nz-th class="text-center" nzWidth="10%"><span>创建时间</span></th>
    <th nz-th class="text-center" nzWidth="5%"><span>操作</span></th>
  </tr>
  </thead>
  <tbody nz-tbody>
  <ng-template ngFor let-data [ngForOf]="nzTable.data" let-i="index">
    <tr nz-tbody-tr>
      <td nz-td class="text-center">{{i+1}}</td>
      <td nz-td class="text-center">{{data.tc}}</td>
      <td nz-td class="text-center">{{data.income >0 ? data.income: "-"+data.expenditure}}￥</td>
      <td nz-td class="text-center">{{data.subjectName }}</td>
      <td nz-td class="text-center">{{data.toType | stateName: enums.userType}}-{{data.toCode}}</td>
      <td nz-td class="text-center">{{data.payWay | stateName: enums.payWay}}</td>
      <td nz-td class="text-center">{{data.bank}}</td>
      <td nz-td class="text-center">{{data.bacctn+"-"+data.bacct}}</td>
      <td nz-td class="text-center">{{data.createTime }}</td>
      <td nz-td class="text-center w10">
        <button nz-button title="查看详情" class="btn-blue" routerLink="/main/finance/financeRecDetail" [queryParams]="{tc: data.tc}">
          <i class="fa fa-check-square-o"></i> 查看
        </button>
      </td>
    </tr>
  </ng-template>
  </tbody>
</nz-table>
