<form #addParam="ngForm" (submit)="addParams()">
  <nz-table #nzTable nzBordered nzTitle="添加参数"
            [nzData]="normParamList"
            [nzFooter]="Footer"
            [nzFrontPagination]="false"
            [nzShowPagination]="false">
    <thead nz-thead>
    <tr>
      <th nz-th class="text-center" nzWidth="5%"><span>序号</span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>参数名<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>需求标准值<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>单位</span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>参数说明</span></th>
      <th nz-th class="text-center" nzWidth="10%"><span>参数因子<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>参数溢价因子<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>参数权重<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="8%"><span>可允许最大差值<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="6%"><span>是否强制<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="6%"><span>是否使用<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="6%"><span>是否必填<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="6%"><span>排序<i class="color-red">*</i></span></th>
      <th nz-th class="text-center" nzWidth="6%"><span>操作</span></th>
    </tr>
    </thead>
    <tbody nz-tbody>
    <ng-template ngFor let-data [ngForOf]="nzTable.data" let-i="index">
      <tr nz-tbody-tr>
        <td nz-td class="text-center">{{i+1}}</td>
        <td nz-td class="text-center">
          <input type="text" nz-input [name]="'paramName'+data.key" [(ngModel)]="data.paramName" required
                 placeholder="参数名">
        </td>
        <td nz-td class="text-center">
          <input type="number" nz-input [name]="'standardVal'+data.key" [(ngModel)]="data.standardVal" required
                 placeholder="需求标准值">
        </td>
        <td nz-td class="text-center">
          <input type="text" nz-input [name]="'unit'+data.key" [(ngModel)]="data.unit" placeholder="单位">
        </td>
        <td nz-td class="text-center">
          <input type="text" nz-input [name]="'paramDesc'+data.key" [(ngModel)]="data.paramDesc"
                 placeholder="参数说明">
        </td>
        <td nz-td class="text-center">
          <nz-radio-group [(ngModel)]="data.paramFactor" [name]="'paramFactor'+data.key" required>
            <label nz-radio [nzValue]="1">越大越好</label>
            <label nz-radio [nzValue]="-1">越小越好</label>
          </nz-radio-group>
        </td>
        <td nz-td class="text-center">
          <nz-input-number [nzMin]="0" [nzStep]="0.25" title="因子越大，溢价能产生的分数越高" required
                           placeholder="参数溢价因子" [name]="'redundancyQualityFactor'+data.key"
                           [(ngModel)]="data.redundancyQualityFactor"></nz-input-number>
        </td>
        <td nz-td class="text-center">
          <input type="number" nz-input [name]="'weight'+data.key" [(ngModel)]="data.weight" required
                 placeholder="参数权重">
        </td>
        <td nz-td class="text-center">
          <input type="number" nz-input [name]="'allowDifference'+data.key" #allowDifference [(ngModel)]="data.allowDifference"
                 required [pattern]="patterns.positive" (ngModelChange)="onlyPositive(allowDifference,$event)"
                 placeholder="可允许最大差值" title="参数差值一旦超过此值，则认为不合格">
        </td>
        <td nz-td class="text-center">
          <nz-switch class="thc" [(ngModel)]="data.isNecessary"
                     nzCheckedChildren="是" nzUnCheckedChildren="否" [name]="'isNecessary'+data.key">
          </nz-switch>
        </td>
        <td nz-td class="text-center">
          <nz-switch class="thc" [(ngModel)]="data.isRequired"
                     nzCheckedChildren="是" nzUnCheckedChildren="否" [name]="'isRequired'+data.key">
          </nz-switch>
        </td>
        <td nz-td class="text-center">
          <nz-switch class="thc" [(ngModel)]="data.isUse"
                     nzCheckedChildren="是" nzUnCheckedChildren="否" [name]="'isUse'+data.key">
          </nz-switch>
        </td>
        <td nz-td class="text-center">
          <input type="number" nz-input [name]="'ord'+data.key" [(ngModel)]="data.ord" required
                 placeholder="排序" title="排序序列号">
        </td>
        <td nz-td class="text-center">
          <nz-popconfirm nzTitle="确定要删除该参数吗？" nzPlacement="top" (nzOnConfirm)="delParam(i)">
            <i nz-popconfirm class="anticon anticon-delete color-red cursor" title="删除"></i>
          </nz-popconfirm>
        </td>
      </tr>
    </ng-template>
    </tbody>
    <ng-template #Footer>
      <button nz-button type="button" nzType="default" (click)="addNewParam()" class="btn-green">
        <i class="anticon anticon-plus"></i>添加参数
      </button>
      <div class="text-right fr">
        <button nz-button type="button" nzType="default" (click)="back()">取消</button>
        <button nz-button type="submit" nzType="primary" class="ml" [disabled]="!addParam.valid"
                [nzLoading]="isConfirmLoading">提交
        </button>
      </div>
    </ng-template>
  </nz-table>
</form>
